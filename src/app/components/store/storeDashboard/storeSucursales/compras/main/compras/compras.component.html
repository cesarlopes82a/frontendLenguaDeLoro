<div class="card ">
    <div class="card-header">
        C  O  M  P  R  A  S      Sucursal:   <strong>{{sucursalNombre}}</strong>
    </div>

    <button type="submit" class="btn btn-primary" [routerLink]="['/sucursal/'+ this.branchId+'/compras/registrarCompra']" [routerLinkActive]="['actived']" >Registrar Nueva Compra</button>

    <div class="card-body">
        <div class="example-container mat-elevation-z8">
            <table class="table">
                <div class="container">
                    <div class="col-md-12">
                        <div class="panel panel-default">
                            <div class="panel-body">
                                <table class="table-fit table-hover" >
                                    <thead>
                                        <tr>
                                            <th>CompraId</th>
                                            <th>Usuario</th>
                                            <th>Proveedor</th>
                                            <th>Fecha de compra</th>
                                            <th>Producto</th>
                                            <th>Cantidad</th>
                                            <th>$ Unitario</th>
                                            <th>Total</th>
                                        </tr>
                                    </thead>
                                    <!-- voy a recorrer todos los usuarios -->
                                    <tbody *ngFor="let compra of comprasByBranchAndPopulatedInfo; let i = index;">
                                        <tr data-bs-toggle="collapse" [attr.href]="'#tiendascollapse_' + i" role="button" aria-expanded="false" aria-controls="collapseExample">
                                                    
                                        <td style="font-size: 12px">{{compra._id}}</td>
                                        <td>{{compra.userId.username}}</td>
                                        <td>{{compra.proveedorId.proveedorName}}</td>
                                        <td>{{compra.fechaDeCompra | date:'MM/dd/yyyy h:mm:ss'}}</td>
                                        <td>{{compra.productId.productName}}</td>
                                        <td>{{compra.cantidad}}</td>
                                        <td>{{compra.precioCompraUnitario | currency: '$'}}</td>
                                        <td>{{compra.precioCompraUnitario * compra.cantidad | currency: '$'}}</td>
                                    
                                        <td>
                                            <p *ngIf="consultoEstadoEliminar(compra._id)==false">
                                                <a class="iconoenlinea" [routerLink]="['/productos/producto',compra._id]"><i class="fas fa-eye" style="margin-left: 5%;"></i></a>
                                                <a class="iconoenlinea" [routerLink]="['/productos/editar/', compra._id]"><i class="fa-solid fa-pencil" style="margin-left: 5%;"></i></a>
                                                <a (click)="pidoEliminar(compra._id)" class="iconoenlinea"><i class="fas fa-trash-alt" style="margin-left: 5%;"></i></a>
                                            </p>
                                            <p *ngIf="consultoEstadoEliminar(compra._id)==true">
                                                <a (click)="deleteUsuario(compra._id)"></a>
                                                <a (click)="deleteUsuario(compra._id)"><i class="fas fa-check" style="color: rgb(24, 185, 24);"></i>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</a>
                                                <a (click)="pidoCancelarEliminar()"><i class="fas fa-check" style="color: red;"></i></a>
                                            </p>
                                        </td>
                                    </tr>

                                        
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </div>
            </table>




        </div>
    </div>
</div>

