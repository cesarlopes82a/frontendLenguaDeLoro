{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\CESAR\\\\apiREST-LenguaDeLoro\\\\frontendLenguaDeLoro\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { StoreService } from 'src/app/services/store.service';\nimport { UserService } from 'src/app/services/user.service';\nimport { global } from 'src/app/services/global';\nimport { SidenavService } from 'src/app/services/sidebar.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/services/user.service\";\nimport * as i2 from \"src/app/services/auth.service\";\nimport * as i3 from \"src/app/services/compras.service\";\nimport * as i4 from \"src/app/services/sidebar.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/common\";\nconst _c0 = [\"sidenav\"];\n\nconst _c1 = function () {\n  return [\"/usuarios\"];\n};\n\nfunction SidebarComponent_a_9_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 5);\n    i0.ɵɵelement(1, \"i\", 11);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \" Usuarios\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\n  }\n}\n\nconst _c2 = function () {\n  return [\"/proveedores\"];\n};\n\nfunction SidebarComponent_a_10_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 5);\n    i0.ɵɵelement(1, \"i\", 12);\n    i0.ɵɵelementStart(2, \"span\");\n    i0.ɵɵtext(3, \" Proveedores\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c2));\n  }\n}\n\nfunction SidebarComponent_div_16_div_1_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 20);\n  }\n}\n\nfunction SidebarComponent_div_16_div_1_div_5_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"div\", 20);\n  }\n}\n\nconst _c3 = function (a1) {\n  return [\"/sucursal\", a1];\n};\n\nconst _c4 = function () {\n  return [\"actived\"];\n};\n\nfunction SidebarComponent_div_16_div_1_div_5_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r11 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 21);\n    i0.ɵɵtemplate(1, SidebarComponent_div_16_div_1_div_5_div_1_Template, 1, 0, \"div\", 17);\n    i0.ɵɵelementStart(2, \"a\", 18);\n    i0.ɵɵlistener(\"click\", function SidebarComponent_div_16_div_1_div_5_Template_a_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r11);\n      const branch_r8 = restoredCtx.$implicit;\n      const ctx_r10 = i0.ɵɵnextContext(3);\n      return ctx_r10.emitirItemMenuSeleccionado(branch_r8.branchName, branch_r8._id, branch_r8.defaultListaDP);\n    });\n    i0.ɵɵelement(3, \"i\", 22);\n    i0.ɵɵelementStart(4, \"span\");\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const branch_r8 = ctx.$implicit;\n    const ctx_r7 = i0.ɵɵnextContext(3);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.itemMenuSeleccionadoId == branch_r8._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c3, branch_r8._id))(\"routerLinkActive\", i0.ɵɵpureFunction0(6, _c4));\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(branch_r8.branchName);\n  }\n}\n\nconst _c5 = function (a1) {\n  return [\"/tienda\", a1];\n};\n\nfunction SidebarComponent_div_16_div_1_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r13 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"div\", 16);\n    i0.ɵɵtemplate(1, SidebarComponent_div_16_div_1_div_1_Template, 1, 0, \"div\", 17);\n    i0.ɵɵelementStart(2, \"a\", 18);\n    i0.ɵɵlistener(\"click\", function SidebarComponent_div_16_div_1_Template_a_click_2_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r13);\n      const tienda_r5 = restoredCtx.$implicit;\n      const ctx_r12 = i0.ɵɵnextContext(2);\n      return ctx_r12.emitirItemMenuSeleccionado(tienda_r5.store.storeName, tienda_r5.store._id, tienda_r5.store.defaultListaDP);\n    });\n    i0.ɵɵelementStart(3, \"span\");\n    i0.ɵɵtext(4);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(5, SidebarComponent_div_16_div_1_div_5_Template, 6, 7, \"div\", 19);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const tienda_r5 = ctx.$implicit;\n    const ctx_r3 = i0.ɵɵnextContext(2);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.itemMenuSeleccionadoId == tienda_r5.store._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c5, tienda_r5.store._id))(\"routerLinkActive\", i0.ɵɵpureFunction0(7, _c4));\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(tienda_r5.store.storeName);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", tienda_r5.branches);\n  }\n}\n\nfunction SidebarComponent_div_16_a_3_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"a\", 23);\n    i0.ɵɵelementStart(1, \"span\");\n    i0.ɵɵtext(2, \"Crear Tienda\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelement(3, \"i\", 24);\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction SidebarComponent_div_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 13);\n    i0.ɵɵtemplate(1, SidebarComponent_div_16_div_1_Template, 6, 8, \"div\", 14);\n    i0.ɵɵelementStart(2, \"div\");\n    i0.ɵɵtemplate(3, SidebarComponent_div_16_a_3_Template, 4, 0, \"a\", 15);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.loggedUser.tiendas);\n    i0.ɵɵadvance(2);\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.loggedUserRole == \"adminMaster\" || ctx_r2.loggedUserRole === \"adminGlobal\");\n  }\n}\n\nconst _c6 = function () {\n  return [\"/estadisticas\"];\n};\n\nexport class SidebarComponent {\n  constructor(_userService, _authService, _comprasService, _sidenavService) {\n    var _this = this;\n\n    this._userService = _userService;\n    this._authService = _authService;\n    this._comprasService = _comprasService;\n    this._sidenavService = _sidenavService;\n    this.loggedUser = null;\n\n    this.getUserByIdAndPopulateStores = /*#__PURE__*/function () {\n      var _ref = _asyncToGenerator(function* (userId) {\n        console.log(\"le estoy pasando el if desde el sidebar a getUserByIdAndPopulateStores() \" + userId);\n\n        _this._userService.getUserByIdAndPopulateStores(userId).subscribe({\n          next: v => {\n            console.log(\"viene el next con lo que meti dentro de global.loggedUser\");\n            console.log(v);\n            _this.loggedUser = v;\n            global.loggedUser = _this.loggedUser;\n            global.reloadNeeded = false;\n            global.loggedUserDB = v.adminMasterDBuser;\n            global.loggedUserID = v._id;\n            global.loggedUserRole = v.roles[0].roleName;\n            global.loggedUserName = v.username;\n            global.loggedUserEmail = v.email;\n            _this.loggedUserRole = v.roles[0].roleName;\n          },\n          error: e => console.error(e),\n          complete: () => console.info('este es el complete')\n        });\n      });\n\n      return function (_x) {\n        return _ref.apply(this, arguments);\n      };\n    }();\n\n    if (this._authService.loggedIn()) {\n      console.log(\"ESTOY LOGUEADOOOOOOOOO SIDEBARRRRRRRRR\");\n\n      const userId = this._authService.getDecodedAccessToken(String(this._authService.getToken())).id;\n\n      this.getUserByIdAndPopulateStores(userId);\n    }\n  }\n\n  ngOnInit() {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      _this2.loggedUserRole = String(localStorage.getItem(\"loggedUserRole\"));\n    })();\n  }\n\n  emitirItemMenuSeleccionado(itemMenuSeleccionado, itemMenuSeleccionadoId, defaultListaDP) {\n    console.log(\"esta es la lista defaultttttt------------\");\n    console.log(defaultListaDP);\n    this.itemMenuSeleccionadoId = itemMenuSeleccionadoId;\n    localStorage.setItem(\"defaultListaDP\", defaultListaDP); ///Esto es para actualiar la ldp del datasouce si mofifique alguna ldp default\n\n    let ldpUpdated = localStorage.getItem(\"ldpUpdated\");\n    console.log(ldpUpdated);\n\n    if (ldpUpdated == \"true\") {\n      console.log(\"hay que actualizaaaarrr!!!!!!!!!!!!!!!!!!!!!!!!!! \");\n      let ldpUpdatedTarget = String(String(localStorage.getItem(\"ldpUpdatedTarget\"))); //Esta es la tienda o la sucursal seleccionada a la que se le modifico la Default ldp \n\n      let newLdpDefaultForTarget = String(localStorage.getItem(\"newLdpDefaultForTarget\")); //Esto me dice cual es la ldp default que tengo que asignarle al ldpUpdatedTarget\n      //recorro las tiendas y las branch para encontrar la ldp default que modifique/actualicé/asigné antes\n\n      for (let i = 0; i < this.loggedUser.tiendas.length; i++) {\n        console.log(\"-target: \" + ldpUpdatedTarget);\n        console.log(\"t: \" + this.loggedUser.tiendas[i]._id);\n\n        if (String(this.loggedUser.tiendas[i]._id) == ldpUpdatedTarget) {\n          console.log(\"igualessssss-----------\");\n          this.loggedUser.tiendas[i].defaultListaDP = newLdpDefaultForTarget;\n          localStorage.setItem(\"ldpUpdated\", \"false\");\n          break;\n        } else {\n          for (let x = 0; x < this.loggedUser.tiendas[i].branches.length; x++) {\n            console.log(\"B: \" + this.loggedUser.tiendas[i].branches[x]._id);\n\n            if (String(this.loggedUser.tiendas[i].branches[x]._id) == ldpUpdatedTarget) {\n              console.log(\"igualessssss-----------\");\n              this.loggedUser.tiendas[i].branches[x].defaultListaDP = newLdpDefaultForTarget;\n              localStorage.setItem(\"ldpUpdated\", \"false\");\n            }\n          }\n        }\n      }\n    }\n\n    localStorage.setItem(\"itemMenuSeleccionado\", itemMenuSeleccionado);\n    localStorage.setItem(\"itemMenuSeleccionadoId\", itemMenuSeleccionadoId);\n  }\n\n}\n\nSidebarComponent.ɵfac = function SidebarComponent_Factory(t) {\n  return new (t || SidebarComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ComprasService), i0.ɵɵdirectiveInject(i4.SidenavService));\n};\n\nSidebarComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: SidebarComponent,\n  selectors: [[\"app-sidebar\"]],\n  viewQuery: function SidebarComponent_Query(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵviewQuery(_c0, 5);\n    }\n\n    if (rf & 2) {\n      let _t;\n\n      i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sidenav = _t.first);\n    }\n  },\n  features: [i0.ɵɵProvidersFeature([StoreService, UserService, SidenavService])],\n  decls: 17,\n  vars: 5,\n  consts: [[1, \"container-fluid\"], [1, \"sidenav\"], [1, \"row\", \"menuSidebar\"], [1, \"barra-lateral\", \"col-12\", \"col-sm-auto\"], [1, \"menu\", \"d-flex\", \"d-sm-block\", \"justify-content-center\", \"flex-wrap\"], [3, \"routerLink\"], [1, \"far\", \"fa-chart-bar\", 2, \"margin-right\", \"5%\"], [3, \"routerLink\", 4, \"ngIf\"], [1, \"fas\", \"fa-home\", 2, \"margin-right\", \"5%\"], [1, \"icono\", \"derecha\", \"fas\", \"fa-angle-down\"], [\"class\", \"sub-menu\", 4, \"ngIf\"], [1, \"fas\", \"fa-user\", 2, \"margin-right\", \"5%\"], [1, \"fas\", \"fa-address-book\", 2, \"margin-right\", \"5%\"], [1, \"sub-menu\"], [\"class\", \"sub-menuTiendas \", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"/tienda/crearTienda\", 4, \"ngIf\"], [1, \"sub-menuTiendas\"], [\"class\", \"test\", 4, \"ngIf\"], [3, \"routerLink\", \"routerLinkActive\", \"click\"], [\"class\", \"sub-menuBranches\", 4, \"ngFor\", \"ngForOf\"], [1, \"test\"], [1, \"sub-menuBranches\"], [1, \"fa-solid\", \"fa-barcode\"], [\"href\", \"/tienda/crearTienda\"], [1, \"fa-solid\", \"fa-folder-plus\", 2, \"margin-left\", \"5%\"]],\n  template: function SidebarComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"div\", 0);\n      i0.ɵɵelementStart(1, \"div\", 1);\n      i0.ɵɵelementStart(2, \"div\", 2);\n      i0.ɵɵelementStart(3, \"div\", 3);\n      i0.ɵɵelementStart(4, \"nav\", 4);\n      i0.ɵɵelementStart(5, \"a\", 5);\n      i0.ɵɵelement(6, \"i\", 6);\n      i0.ɵɵelementStart(7, \"span\");\n      i0.ɵɵtext(8, \"Estadisticas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(9, SidebarComponent_a_9_Template, 4, 2, \"a\", 7);\n      i0.ɵɵtemplate(10, SidebarComponent_a_10_Template, 4, 2, \"a\", 7);\n      i0.ɵɵelementStart(11, \"a\");\n      i0.ɵɵelement(12, \"i\", 8);\n      i0.ɵɵelementStart(13, \"span\");\n      i0.ɵɵtext(14, \"Tiendas\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(15, \"i\", 9);\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(16, SidebarComponent_div_16_Template, 4, 2, \"div\", 10);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(4, _c6));\n      i0.ɵɵadvance(4);\n      i0.ɵɵproperty(\"ngIf\", ctx.loggedUserRole === \"adminMaster\" || ctx.loggedUserRole === \"adminGlobal\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", ctx.loggedUserRole === \"adminMaster\" || ctx.loggedUserRole === \"adminGlobal\");\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"ngIf\", ctx.loggedUser);\n    }\n  },\n  directives: [i5.RouterLinkWithHref, i6.NgIf, i6.NgForOf, i5.RouterLinkActive],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/CESAR/apiREST-LenguaDeLoro/frontendLenguaDeLoro/src/app/components/sidebar/sidebar.component.ts"],"names":["StoreService","UserService","global","SidenavService","i0","i1","i2","i3","i4","i5","i6","_c0","_c1","SidebarComponent_a_9_Template","rf","ctx","ɵɵelementStart","ɵɵelement","ɵɵtext","ɵɵelementEnd","ɵɵproperty","ɵɵpureFunction0","_c2","SidebarComponent_a_10_Template","SidebarComponent_div_16_div_1_div_1_Template","SidebarComponent_div_16_div_1_div_5_div_1_Template","_c3","a1","_c4","SidebarComponent_div_16_div_1_div_5_Template","_r11","ɵɵgetCurrentView","ɵɵtemplate","ɵɵlistener","SidebarComponent_div_16_div_1_div_5_Template_a_click_2_listener","restoredCtx","ɵɵrestoreView","branch_r8","$implicit","ctx_r10","ɵɵnextContext","emitirItemMenuSeleccionado","branchName","_id","defaultListaDP","ctx_r7","ɵɵadvance","itemMenuSeleccionadoId","ɵɵpureFunction1","ɵɵtextInterpolate","_c5","SidebarComponent_div_16_div_1_Template","_r13","SidebarComponent_div_16_div_1_Template_a_click_2_listener","tienda_r5","ctx_r12","store","storeName","ctx_r3","branches","SidebarComponent_div_16_a_3_Template","SidebarComponent_div_16_Template","ctx_r2","loggedUser","tiendas","loggedUserRole","_c6","SidebarComponent","constructor","_userService","_authService","_comprasService","_sidenavService","getUserByIdAndPopulateStores","userId","console","log","subscribe","next","v","reloadNeeded","loggedUserDB","adminMasterDBuser","loggedUserID","roles","roleName","loggedUserName","username","loggedUserEmail","email","error","e","complete","info","loggedIn","getDecodedAccessToken","String","getToken","id","ngOnInit","localStorage","getItem","itemMenuSeleccionado","setItem","ldpUpdated","ldpUpdatedTarget","newLdpDefaultForTarget","i","length","x","ɵfac","SidebarComponent_Factory","t","ɵɵdirectiveInject","AuthService","ComprasService","ɵcmp","ɵɵdefineComponent","type","selectors","viewQuery","SidebarComponent_Query","ɵɵviewQuery","_t","ɵɵqueryRefresh","ɵɵloadQuery","sidenav","first","features","ɵɵProvidersFeature","decls","vars","consts","template","SidebarComponent_Template","directives","RouterLinkWithHref","NgIf","NgForOf","RouterLinkActive","encapsulation"],"mappings":"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","sourcesContent":["import { StoreService } from 'src/app/services/store.service';\r\nimport { UserService } from 'src/app/services/user.service';\r\nimport { global } from 'src/app/services/global';\r\nimport { SidenavService } from 'src/app/services/sidebar.service';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"src/app/services/user.service\";\r\nimport * as i2 from \"src/app/services/auth.service\";\r\nimport * as i3 from \"src/app/services/compras.service\";\r\nimport * as i4 from \"src/app/services/sidebar.service\";\r\nimport * as i5 from \"@angular/router\";\r\nimport * as i6 from \"@angular/common\";\r\nconst _c0 = [\"sidenav\"];\r\nconst _c1 = function () { return [\"/usuarios\"]; };\r\nfunction SidebarComponent_a_9_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"a\", 5);\r\n    i0.ɵɵelement(1, \"i\", 11);\r\n    i0.ɵɵelementStart(2, \"span\");\r\n    i0.ɵɵtext(3, \" Usuarios\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c1));\r\n} }\r\nconst _c2 = function () { return [\"/proveedores\"]; };\r\nfunction SidebarComponent_a_10_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"a\", 5);\r\n    i0.ɵɵelement(1, \"i\", 12);\r\n    i0.ɵɵelementStart(2, \"span\");\r\n    i0.ɵɵtext(3, \" Proveedores\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(1, _c2));\r\n} }\r\nfunction SidebarComponent_div_16_div_1_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"div\", 20);\r\n} }\r\nfunction SidebarComponent_div_16_div_1_div_5_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelement(0, \"div\", 20);\r\n} }\r\nconst _c3 = function (a1) { return [\"/sucursal\", a1]; };\r\nconst _c4 = function () { return [\"actived\"]; };\r\nfunction SidebarComponent_div_16_div_1_div_5_Template(rf, ctx) { if (rf & 1) {\r\n    const _r11 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 21);\r\n    i0.ɵɵtemplate(1, SidebarComponent_div_16_div_1_div_5_div_1_Template, 1, 0, \"div\", 17);\r\n    i0.ɵɵelementStart(2, \"a\", 18);\r\n    i0.ɵɵlistener(\"click\", function SidebarComponent_div_16_div_1_div_5_Template_a_click_2_listener() { const restoredCtx = i0.ɵɵrestoreView(_r11); const branch_r8 = restoredCtx.$implicit; const ctx_r10 = i0.ɵɵnextContext(3); return ctx_r10.emitirItemMenuSeleccionado(branch_r8.branchName, branch_r8._id, branch_r8.defaultListaDP); });\r\n    i0.ɵɵelement(3, \"i\", 22);\r\n    i0.ɵɵelementStart(4, \"span\");\r\n    i0.ɵɵtext(5);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const branch_r8 = ctx.$implicit;\r\n    const ctx_r7 = i0.ɵɵnextContext(3);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r7.itemMenuSeleccionadoId == branch_r8._id);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(4, _c3, branch_r8._id))(\"routerLinkActive\", i0.ɵɵpureFunction0(6, _c4));\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵtextInterpolate(branch_r8.branchName);\r\n} }\r\nconst _c5 = function (a1) { return [\"/tienda\", a1]; };\r\nfunction SidebarComponent_div_16_div_1_Template(rf, ctx) { if (rf & 1) {\r\n    const _r13 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"div\", 16);\r\n    i0.ɵɵtemplate(1, SidebarComponent_div_16_div_1_div_1_Template, 1, 0, \"div\", 17);\r\n    i0.ɵɵelementStart(2, \"a\", 18);\r\n    i0.ɵɵlistener(\"click\", function SidebarComponent_div_16_div_1_Template_a_click_2_listener() { const restoredCtx = i0.ɵɵrestoreView(_r13); const tienda_r5 = restoredCtx.$implicit; const ctx_r12 = i0.ɵɵnextContext(2); return ctx_r12.emitirItemMenuSeleccionado(tienda_r5.store.storeName, tienda_r5.store._id, tienda_r5.store.defaultListaDP); });\r\n    i0.ɵɵelementStart(3, \"span\");\r\n    i0.ɵɵtext(4);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(5, SidebarComponent_div_16_div_1_div_5_Template, 6, 7, \"div\", 19);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const tienda_r5 = ctx.$implicit;\r\n    const ctx_r3 = i0.ɵɵnextContext(2);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r3.itemMenuSeleccionadoId == tienda_r5.store._id);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(5, _c5, tienda_r5.store._id))(\"routerLinkActive\", i0.ɵɵpureFunction0(7, _c4));\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(tienda_r5.store.storeName);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngForOf\", tienda_r5.branches);\r\n} }\r\nfunction SidebarComponent_div_16_a_3_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"a\", 23);\r\n    i0.ɵɵelementStart(1, \"span\");\r\n    i0.ɵɵtext(2, \"Crear Tienda\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelement(3, \"i\", 24);\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction SidebarComponent_div_16_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 13);\r\n    i0.ɵɵtemplate(1, SidebarComponent_div_16_div_1_Template, 6, 8, \"div\", 14);\r\n    i0.ɵɵelementStart(2, \"div\");\r\n    i0.ɵɵtemplate(3, SidebarComponent_div_16_a_3_Template, 4, 0, \"a\", 15);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const ctx_r2 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngForOf\", ctx_r2.loggedUser.tiendas);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r2.loggedUserRole == \"adminMaster\" || ctx_r2.loggedUserRole === \"adminGlobal\");\r\n} }\r\nconst _c6 = function () { return [\"/estadisticas\"]; };\r\nexport class SidebarComponent {\r\n    constructor(_userService, _authService, _comprasService, _sidenavService) {\r\n        this._userService = _userService;\r\n        this._authService = _authService;\r\n        this._comprasService = _comprasService;\r\n        this._sidenavService = _sidenavService;\r\n        this.loggedUser = null;\r\n        this.getUserByIdAndPopulateStores = async (userId) => {\r\n            console.log(\"le estoy pasando el if desde el sidebar a getUserByIdAndPopulateStores() \" + userId);\r\n            this._userService.getUserByIdAndPopulateStores(userId)\r\n                .subscribe({\r\n                next: (v) => {\r\n                    console.log(\"viene el next con lo que meti dentro de global.loggedUser\");\r\n                    console.log(v);\r\n                    this.loggedUser = v;\r\n                    global.loggedUser = this.loggedUser;\r\n                    global.reloadNeeded = false;\r\n                    global.loggedUserDB = v.adminMasterDBuser;\r\n                    global.loggedUserID = v._id;\r\n                    global.loggedUserRole = v.roles[0].roleName;\r\n                    global.loggedUserName = v.username;\r\n                    global.loggedUserEmail = v.email;\r\n                    this.loggedUserRole = v.roles[0].roleName;\r\n                },\r\n                error: (e) => console.error(e),\r\n                complete: () => console.info('este es el complete')\r\n            });\r\n        };\r\n        if (this._authService.loggedIn()) {\r\n            console.log(\"ESTOY LOGUEADOOOOOOOOO SIDEBARRRRRRRRR\");\r\n            const userId = this._authService.getDecodedAccessToken(String(this._authService.getToken())).id;\r\n            this.getUserByIdAndPopulateStores(userId);\r\n        }\r\n    }\r\n    async ngOnInit() {\r\n        this.loggedUserRole = String(localStorage.getItem(\"loggedUserRole\"));\r\n    }\r\n    emitirItemMenuSeleccionado(itemMenuSeleccionado, itemMenuSeleccionadoId, defaultListaDP) {\r\n        console.log(\"esta es la lista defaultttttt------------\");\r\n        console.log(defaultListaDP);\r\n        this.itemMenuSeleccionadoId = itemMenuSeleccionadoId;\r\n        localStorage.setItem(\"defaultListaDP\", defaultListaDP);\r\n        ///Esto es para actualiar la ldp del datasouce si mofifique alguna ldp default\r\n        let ldpUpdated = localStorage.getItem(\"ldpUpdated\");\r\n        console.log(ldpUpdated);\r\n        if (ldpUpdated == \"true\") {\r\n            console.log(\"hay que actualizaaaarrr!!!!!!!!!!!!!!!!!!!!!!!!!! \");\r\n            let ldpUpdatedTarget = String(String(localStorage.getItem(\"ldpUpdatedTarget\"))); //Esta es la tienda o la sucursal seleccionada a la que se le modifico la Default ldp \r\n            let newLdpDefaultForTarget = String(localStorage.getItem(\"newLdpDefaultForTarget\")); //Esto me dice cual es la ldp default que tengo que asignarle al ldpUpdatedTarget\r\n            //recorro las tiendas y las branch para encontrar la ldp default que modifique/actualicé/asigné antes\r\n            for (let i = 0; i < this.loggedUser.tiendas.length; i++) {\r\n                console.log(\"-target: \" + ldpUpdatedTarget);\r\n                console.log(\"t: \" + this.loggedUser.tiendas[i]._id);\r\n                if (String(this.loggedUser.tiendas[i]._id) == ldpUpdatedTarget) {\r\n                    console.log(\"igualessssss-----------\");\r\n                    this.loggedUser.tiendas[i].defaultListaDP = newLdpDefaultForTarget;\r\n                    localStorage.setItem(\"ldpUpdated\", \"false\");\r\n                    break;\r\n                }\r\n                else {\r\n                    for (let x = 0; x < this.loggedUser.tiendas[i].branches.length; x++) {\r\n                        console.log(\"B: \" + this.loggedUser.tiendas[i].branches[x]._id);\r\n                        if (String(this.loggedUser.tiendas[i].branches[x]._id) == ldpUpdatedTarget) {\r\n                            console.log(\"igualessssss-----------\");\r\n                            this.loggedUser.tiendas[i].branches[x].defaultListaDP = newLdpDefaultForTarget;\r\n                            localStorage.setItem(\"ldpUpdated\", \"false\");\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        localStorage.setItem(\"itemMenuSeleccionado\", itemMenuSeleccionado);\r\n        localStorage.setItem(\"itemMenuSeleccionadoId\", itemMenuSeleccionadoId);\r\n    }\r\n}\r\nSidebarComponent.ɵfac = function SidebarComponent_Factory(t) { return new (t || SidebarComponent)(i0.ɵɵdirectiveInject(i1.UserService), i0.ɵɵdirectiveInject(i2.AuthService), i0.ɵɵdirectiveInject(i3.ComprasService), i0.ɵɵdirectiveInject(i4.SidenavService)); };\r\nSidebarComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: SidebarComponent, selectors: [[\"app-sidebar\"]], viewQuery: function SidebarComponent_Query(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵviewQuery(_c0, 5);\r\n    } if (rf & 2) {\r\n        let _t;\r\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.sidenav = _t.first);\r\n    } }, features: [i0.ɵɵProvidersFeature([StoreService, UserService, SidenavService])], decls: 17, vars: 5, consts: [[1, \"container-fluid\"], [1, \"sidenav\"], [1, \"row\", \"menuSidebar\"], [1, \"barra-lateral\", \"col-12\", \"col-sm-auto\"], [1, \"menu\", \"d-flex\", \"d-sm-block\", \"justify-content-center\", \"flex-wrap\"], [3, \"routerLink\"], [1, \"far\", \"fa-chart-bar\", 2, \"margin-right\", \"5%\"], [3, \"routerLink\", 4, \"ngIf\"], [1, \"fas\", \"fa-home\", 2, \"margin-right\", \"5%\"], [1, \"icono\", \"derecha\", \"fas\", \"fa-angle-down\"], [\"class\", \"sub-menu\", 4, \"ngIf\"], [1, \"fas\", \"fa-user\", 2, \"margin-right\", \"5%\"], [1, \"fas\", \"fa-address-book\", 2, \"margin-right\", \"5%\"], [1, \"sub-menu\"], [\"class\", \"sub-menuTiendas \", 4, \"ngFor\", \"ngForOf\"], [\"href\", \"/tienda/crearTienda\", 4, \"ngIf\"], [1, \"sub-menuTiendas\"], [\"class\", \"test\", 4, \"ngIf\"], [3, \"routerLink\", \"routerLinkActive\", \"click\"], [\"class\", \"sub-menuBranches\", 4, \"ngFor\", \"ngForOf\"], [1, \"test\"], [1, \"sub-menuBranches\"], [1, \"fa-solid\", \"fa-barcode\"], [\"href\", \"/tienda/crearTienda\"], [1, \"fa-solid\", \"fa-folder-plus\", 2, \"margin-left\", \"5%\"]], template: function SidebarComponent_Template(rf, ctx) { if (rf & 1) {\r\n        i0.ɵɵelementStart(0, \"div\", 0);\r\n        i0.ɵɵelementStart(1, \"div\", 1);\r\n        i0.ɵɵelementStart(2, \"div\", 2);\r\n        i0.ɵɵelementStart(3, \"div\", 3);\r\n        i0.ɵɵelementStart(4, \"nav\", 4);\r\n        i0.ɵɵelementStart(5, \"a\", 5);\r\n        i0.ɵɵelement(6, \"i\", 6);\r\n        i0.ɵɵelementStart(7, \"span\");\r\n        i0.ɵɵtext(8, \"Estadisticas\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(9, SidebarComponent_a_9_Template, 4, 2, \"a\", 7);\r\n        i0.ɵɵtemplate(10, SidebarComponent_a_10_Template, 4, 2, \"a\", 7);\r\n        i0.ɵɵelementStart(11, \"a\");\r\n        i0.ɵɵelement(12, \"i\", 8);\r\n        i0.ɵɵelementStart(13, \"span\");\r\n        i0.ɵɵtext(14, \"Tiendas\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(15, \"i\", 9);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(16, SidebarComponent_div_16_Template, 4, 2, \"div\", 10);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction0(4, _c6));\r\n        i0.ɵɵadvance(4);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.loggedUserRole === \"adminMaster\" || ctx.loggedUserRole === \"adminGlobal\");\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.loggedUserRole === \"adminMaster\" || ctx.loggedUserRole === \"adminGlobal\");\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵproperty(\"ngIf\", ctx.loggedUser);\r\n    } }, directives: [i5.RouterLinkWithHref, i6.NgIf, i6.NgForOf, i5.RouterLinkActive], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}