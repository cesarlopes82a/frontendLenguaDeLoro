{"ast":null,"code":"import _asyncToGenerator from \"C:\\\\Users\\\\CESAR\\\\apiREST-LenguaDeLoro\\\\frontendLenguaDeLoro\\\\node_modules\\\\@babel\\\\runtime\\\\helpers\\\\esm\\\\asyncToGenerator.js\";\nimport { DialogprecioComponent } from '../../dialogPrecio/dialogprecio/dialogprecio.component';\nimport { productOfLDP } from '../../../../../../models/productOfLDP';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"../../../../../../../app/services/product.service\";\nimport * as i2 from \"src/app/services/branch.service\";\nimport * as i3 from \"../../../../../../services/listadeprecios.service\";\nimport * as i4 from \"../../../../../../services/user.service\";\nimport * as i5 from \"@angular/router\";\nimport * as i6 from \"@angular/material/dialog\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"@angular/material/form-field\";\nimport * as i9 from \"@angular/material/input\";\nimport * as i10 from \"@angular/material/select\";\nimport * as i11 from \"@angular/material/core\";\nimport * as i12 from \"@angular/common\";\nimport * as i13 from \"@angular/material/button\";\n\nfunction NewldpComponent_mat_option_31_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r9 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"mat-option\", 28);\n    i0.ɵɵlistener(\"onSelectionChange\", function NewldpComponent_mat_option_31_Template_mat_option_onSelectionChange_0_listener($event) {\n      i0.ɵɵrestoreView(_r9);\n      const ctx_r8 = i0.ɵɵnextContext();\n      return ctx_r8.actualizarRefCostosStock($event);\n    });\n    i0.ɵɵtext(1);\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const branch_r7 = ctx.$implicit;\n    i0.ɵɵpropertyInterpolate(\"value\", branch_r7._id);\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(branch_r7.branchName);\n  }\n}\n\nfunction NewldpComponent_tbody_53_ng_container_12_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\", 29);\n    i0.ɵɵtext(2, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction NewldpComponent_tbody_53_ng_template_13_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"date\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r11 = i0.ɵɵnextContext().index;\n    const ctx_r14 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(2, 1, ctx_r14._productsList[i_r11].fechaUltimaCompra, \"MM/dd/yyyy h:mm:ss\"), \" \");\n  }\n}\n\nfunction NewldpComponent_tbody_53_ng_container_15_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\", 29);\n    i0.ɵɵtext(2, \"-\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n}\n\nfunction NewldpComponent_tbody_53_ng_template_16_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 29);\n    i0.ɵɵtext(1);\n    i0.ɵɵpipe(2, \"currency\");\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r11 = i0.ɵɵnextContext().index;\n    const ctx_r17 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, ctx_r17._productsList[i_r11].costoUnitario, \"$\"));\n  }\n}\n\nfunction NewldpComponent_tbody_53_ng_container_24_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementContainerStart(0);\n    i0.ɵɵelementStart(1, \"td\", 29);\n    i0.ɵɵtext(2);\n    i0.ɵɵpipe(3, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementContainerEnd();\n  }\n\n  if (rf & 2) {\n    const i_r11 = i0.ɵɵnextContext().index;\n    const ctx_r18 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(3, 1, ctx_r18._productsList[i_r11].precioVenta - ctx_r18._productsList[i_r11].costoUnitario, \"$\"), \" \");\n  }\n}\n\nfunction NewldpComponent_tbody_53_ng_template_25_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"td\", 29);\n    i0.ɵɵtext(1, \"-\");\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NewldpComponent_tbody_53_Template(rf, ctx) {\n  if (rf & 1) {\n    const _r25 = i0.ɵɵgetCurrentView();\n\n    i0.ɵɵelementStart(0, \"tbody\");\n    i0.ɵɵelementStart(1, \"tr\");\n    i0.ɵɵelementStart(2, \"td\", 29);\n    i0.ɵɵtext(3);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(4, \"td\", 29);\n    i0.ɵɵtext(5);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(6, \"td\", 29);\n    i0.ɵɵtext(7);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(8, \"td\", 29);\n    i0.ɵɵtext(9);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(10, \"td\", 29);\n    i0.ɵɵtext(11);\n    i0.ɵɵelementEnd();\n    i0.ɵɵtemplate(12, NewldpComponent_tbody_53_ng_container_12_Template, 3, 0, \"ng-container\", 30);\n    i0.ɵɵtemplate(13, NewldpComponent_tbody_53_ng_template_13_Template, 3, 4, \"ng-template\", null, 31, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵtemplate(15, NewldpComponent_tbody_53_ng_container_15_Template, 3, 0, \"ng-container\", 30);\n    i0.ɵɵtemplate(16, NewldpComponent_tbody_53_ng_template_16_Template, 3, 4, \"ng-template\", null, 32, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementStart(18, \"td\", 33);\n    i0.ɵɵtext(19);\n    i0.ɵɵpipe(20, \"currency\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(21, \"td\", 29);\n    i0.ɵɵelementStart(22, \"div\", 34);\n    i0.ɵɵelementStart(23, \"div\", 6);\n    i0.ɵɵtemplate(24, NewldpComponent_tbody_53_ng_container_24_Template, 4, 4, \"ng-container\", 30);\n    i0.ɵɵtemplate(25, NewldpComponent_tbody_53_ng_template_25_Template, 2, 0, \"ng-template\", null, 35, i0.ɵɵtemplateRefExtractor);\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementStart(27, \"div\", 6);\n    i0.ɵɵelementStart(28, \"button\", 36);\n    i0.ɵɵlistener(\"click\", function NewldpComponent_tbody_53_Template_button_click_28_listener() {\n      const restoredCtx = i0.ɵɵrestoreView(_r25);\n      const i_r11 = restoredCtx.index;\n      const ctx_r24 = i0.ɵɵnextContext();\n      return ctx_r24.openDialogPrecio(ctx_r24._productsList[i_r11].costoUnitario, ctx_r24._productsList[i_r11].productName, ctx_r24._productsList[i_r11].precioVenta, i_r11);\n    });\n    i0.ɵɵtext(29, \"Edit\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n\n  if (rf & 2) {\n    const i_r11 = ctx.index;\n\n    const _r13 = i0.ɵɵreference(14);\n\n    const _r16 = i0.ɵɵreference(17);\n\n    const _r19 = i0.ɵɵreference(26);\n\n    const ctx_r4 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(3);\n    i0.ɵɵtextInterpolate(i_r11);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4._productsList[i_r11].productName);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4._productsList[i_r11].rubro);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4._productsList[i_r11].codigo);\n    i0.ɵɵadvance(2);\n    i0.ɵɵtextInterpolate(ctx_r4._productsList[i_r11].stock);\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4._productsList[i_r11].fechaUltimaCompra && ctx_r4._productsList[i_r11].fechaUltimaCompra === \"-\")(\"ngIfElse\", _r13);\n    i0.ɵɵadvance(3);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4._productsList[i_r11].fechaUltimaCompra === \"-\")(\"ngIfElse\", _r16);\n    i0.ɵɵadvance(4);\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(20, 12, ctx_r4._productsList[i_r11].precioVenta, \"$\"));\n    i0.ɵɵadvance(5);\n    i0.ɵɵproperty(\"ngIf\", ctx_r4._productsList[i_r11].fechaUltimaCompra != \"-\" && ctx_r4._productsList[i_r11].precioVenta > 0)(\"ngIfElse\", _r19);\n  }\n}\n\nfunction NewldpComponent_div_58_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" Ingrese un \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"nombre \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" para la nueva \");\n    i0.ɵɵelementStart(5, \"strong\");\n    i0.ɵɵtext(6, \"Lista de precios\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(7, \" antes confirmar! \");\n    i0.ɵɵelementStart(8, \"button\", 38);\n    i0.ɵɵelementStart(9, \"span\", 39);\n    i0.ɵɵtext(10, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nfunction NewldpComponent_div_59_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\", 37);\n    i0.ɵɵtext(1, \" Ingrese una \");\n    i0.ɵɵelementStart(2, \"strong\");\n    i0.ɵɵtext(3, \"descripci\\u00F3n \");\n    i0.ɵɵelementEnd();\n    i0.ɵɵtext(4, \" del uso que se le dat\\u00E1 a la nueva Lista de Precios para poder confirmar! \");\n    i0.ɵɵelementStart(5, \"button\", 38);\n    i0.ɵɵelementStart(6, \"span\", 39);\n    i0.ɵɵtext(7, \"\\u00D7\");\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n    i0.ɵɵelementEnd();\n  }\n}\n\nconst _c0 = function (a0) {\n  return [a0];\n};\n\nconst _c1 = function () {\n  return [\"actived\"];\n};\n\nexport class NewldpComponent {\n  constructor(_productService, _branchService, _listadeprecioService, _userService, _route, _router, dialog) {\n    this._productService = _productService;\n    this._branchService = _branchService;\n    this._listadeprecioService = _listadeprecioService;\n    this._userService = _userService;\n    this._route = _route;\n    this._router = _router;\n    this.dialog = dialog;\n    this._productsList = []; //contiene todos los productos de la lista de precios tal cual como se van a almacenar en la DB\n\n    this.listaOrigenIdparaClonar = \"\"; //Es el id de la lista que quiero clonar.\n\n    this.referenciaCostosStock = \"\";\n    this.fechaDeCreacion = new Date().toISOString().split('T')[0];\n  }\n\n  ngOnInit() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      // PASO 1: VERIFICO si esto es una copia de una lista o es una lista nueva 100%\n      _this._listadeprecioService.enviarListId.subscribe(data => {\n        _this._listadeprecioService.setListaId(data.data);\n      }); //Lo primero que tengo que hacer es obtener el storeId\n\n\n      _this._route.params.subscribe(params => {\n        _this.storeId = params['id']; //una vez que tengo el storeId puedo traerme la lista de productos de esta storeId\n\n        _this.getBranchesByStoreId(_this.storeId);\n\n        _this.getProductosByStoreIdAndPopulate(_this.storeId);\n      });\n    })();\n  }\n\n  onSubmit(form) {}\n\n  registrarListaDePrecios() {\n    this._listadeprecioService.registrarNuevaLDP(this._productsList, this.ldpNombre, this.ldpDescripcion, this.fechaDeCreacion, this.storeId).subscribe({\n      next: v => {\n        console.log(\"MENSAJE: despues del registrarNuevaLDP\");\n        console.log(v);\n\n        this._router.navigate(['/tienda', this.storeId, 'ldp']);\n      },\n      error: e => {\n        console.log(e.error);\n      },\n      complete: () => console.info('complete')\n    });\n  }\n\n  getBranchesByStoreId(storeId) {\n    this._branchService.getBranchesByStoreId(storeId).subscribe({\n      next: branches => {\n        console.log(\"estas son las branches que encontré\");\n        console.log(branches);\n        this.branchesByStore = branches.slice();\n      },\n      error: e => console.error(e),\n      complete: function () {\n        var _ref = _asyncToGenerator(function* () {});\n\n        return function complete() {\n          return _ref.apply(this, arguments);\n        };\n      }()\n    });\n  }\n\n  getProductosByStoreIdAndPopulate(storeId) {\n    var _this2 = this;\n\n    this._productService.getProductosByStoreIdAndPopulate(storeId).subscribe({\n      next: productos => {\n        let arrayProductos = []; // es una variable auxiliar. contiene lo mismo que el array de productos pero con los datos bien formateados. una vez formateado correctamete se pisa el array de productos.\n        //tengo que agarrar la lista de productos que recibí del backend y formatearla para poder usarla aca\n        // voy a reemplazar por un (-) lo valores que pueden ser null\n        //paso todos los productos a un nuevo array arrayProductos con los datos bien formateados(sin null)\n\n        for (let producto of productos) {\n          //no tengo mas la clave ultimoRegCompra. hago esto para que siga funcionando. ningun producto va a tener un ultimo reg de compra de esta lista\n\n          /*\r\n          if(producto.ultimoRegCompra === null){\r\n            let regCompra = {\r\n              fechaDeCompra:\"-\",\r\n              precioCompraUnitario: \"-\"\r\n            }\r\n            producto.ultimoRegCompra = regCompra\r\n          }\r\n          */\n          //producto.ultimoRegCompra.fechaDeCompra=\"-\";             ///agrego esto para salvar\n          //producto.ultimoRegCompra.precioCompraUnitario = \"-\"     ///agrego esto para salvar\n          producto.precioVenta = null;\n          arrayProductos.push(producto); //creo los elementos que voy a almacenar dentro de la lista de precios \n          //defino la estructura del elemento que voy a guardar en la lista de procutos\n\n          let productOfLDPnew = new productOfLDP(producto._id, producto.productName, producto.categoriaRubro.categoryName, producto.codigo, producto.stock, \"-\", //producto.ultimoRegCompra.fechaDeCompra,\n          0, //producto.ultimoRegCompra.precioCompraUnitario,\n          producto.precioVenta); //guardo todos estos elementos en un array (_productList)\n\n          this._productsList.push(productOfLDPnew); //this._listadeprecioService.addProductTothelist(productOfLDPnew)\n\n        }\n\n        this.products = arrayProductos;\n        console.log(\"this.products---------------son todos los productos que tiene la tienda. lo recibo del backend\");\n        console.log(this.products);\n      },\n      error: e => console.error(e),\n      complete: function () {\n        var _ref2 = _asyncToGenerator(function* () {\n          //despues de traer la lista completa de productos de la tienda VOY A VER SI TENGO QUE CLONAR O CREAR UNA LISTA NUEVA\n          let listaDpQueQuieroClonar = yield _this2._listadeprecioService.getListaId();\n\n          if (listaDpQueQuieroClonar != \"\") {\n            //si esta variable es distinta de \"\" es porque ESTOY INTENTANDO CLONAR UNA LISTA DE PRECIOS\n            console.log(\"MENSAJE: Intentando clonar lista de precios listaId: \" + listaDpQueQuieroClonar);\n            _this2.listaOrigenIdparaClonar = listaDpQueQuieroClonar; //LIMPIO LA variable para evitar problemas\n\n            _this2._listadeprecioService.clearListaId();\n          }\n\n          console.log(\"compleeeeeeeeeeeeeeeeeeeeeeeeeete\");\n          console.log(\"listaOrigenIdparaClonar\");\n          console.log(_this2.listaOrigenIdparaClonar);\n          console.log(\"lista completa de productos de la tienda\");\n          console.log(_this2._productsList);\n\n          if (_this2.listaOrigenIdparaClonar && _this2._productsList) {\n            console.log(\"MENSAJE: Copia de Lista de precios. obteniendo informacion de lista de precios ID: \" + _this2.listaOrigenIdparaClonar);\n\n            _this2.getListaDpByIdAndPopulateProducts(_this2.listaOrigenIdparaClonar);\n          }\n        });\n\n        return function complete() {\n          return _ref2.apply(this, arguments);\n        };\n      }()\n    });\n  }\n\n  getListaDpByIdAndPopulateProducts(listaId) {\n    this._listadeprecioService.getListaDpByIdAndPopulateProducts(listaId).subscribe({\n      next: listaFound => {\n        console.log(\"MENSAJE: Lista de precios id: \" + listaId + \" recibida exitosamente.\");\n        console.log(listaFound); //no podia leer la listaFoun asi que hago esto y ahora anda\n\n        this.listadpOriginal = JSON.stringify(listaFound);\n        this.listadpOriginal = JSON.parse(this.listadpOriginal); //---------------------------------------\n\n        console.log(\"esta es la lista de precio original\");\n        console.log(this.listadpOriginal);\n        console.log(this.listadpOriginal.ldpProducts);\n        console.log(\"esta es la lista completa de todos los producto de la tienda\");\n        console.log(this._productsList);\n        console.log(\"forrr-----------------------------------------------------------\");\n\n        for (let [index, producto] of this._productsList.entries()) {\n          const localizarTodasLasInstancias = (propiedad, valor) => {\n            return this.listadpOriginal.ldpProducts.filter(element => {\n              return element[propiedad] === valor;\n            });\n          };\n\n          console.log(\"busco este producto en this.listaOrigen.products \" + producto._id);\n          let productoEncontrado = localizarTodasLasInstancias('product', producto._id);\n\n          if (productoEncontrado.length > 0) {\n            console.log(\"indice: \" + index + \" - producto: \");\n            console.log(productoEncontrado);\n            console.log(this._productsList[index].precioVenta + \"  -  \" + productoEncontrado[0].precioVenta);\n            this._productsList[index].precioVenta = productoEncontrado[0].precioVenta; //this._productsList[index].precioVenta = productoEncontrado[0].\n          }\n        }\n\n        console.log(\"forrr-----------------------------------------------------------\");\n        console.log(\"los productos despues del gfor\");\n        console.log(this._productsList);\n      },\n      error: e => {\n        console.error(e.error.message);\n      },\n      complete: () => {\n        console.log(\"el complte de obtener la listaaaa\");\n      }\n    });\n  }\n\n  actualizarRefCostosStock(event) {\n    if (event.isUserInput) {\n      console.log(event.source.value, event.source.selected);\n      let _newProductList = [];\n      const index = this.branchesByStore.findIndex(object => {\n        return object._id == event.source.value;\n      });\n\n      for (let [i, producto] of this._productsList.entries()) {\n        const indexProd = this.branchesByStore[index].stock.findIndex(object => {\n          return object.product == producto._id;\n        });\n        this._productsList[i].fechaUltimaCompra = \"\";\n        this._productsList[i].costoUnitario = this.branchesByStore[index].stock[indexProd].precioUnitUltCompra;\n        this._productsList[i].stock = this.branchesByStore[index].stock[indexProd].cantidad;\n      }\n    }\n  }\n\n  openDialogPrecio(precioCompra, productName, precioVenta, index) {\n    const dialogRef = this.dialog.open(DialogprecioComponent, {\n      width: '50%',\n      data: {\n        'precioCompra': precioCompra,\n        'productName': productName,\n        'precioVenta': precioVenta\n      }\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      console.log(`Dialog result: ${result}`);\n\n      if (`${result}` != \"close\") {\n        this._productsList[index].precioVenta = Number(`${result}`);\n      }\n    });\n  }\n\n}\n\nNewldpComponent.ɵfac = function NewldpComponent_Factory(t) {\n  return new (t || NewldpComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.BranchService), i0.ɵɵdirectiveInject(i3.ListadepreciosService), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i6.MatDialog));\n};\n\nNewldpComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n  type: NewldpComponent,\n  selectors: [[\"app-newldp\"]],\n  decls: 63,\n  vars: 16,\n  consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [3, \"ngSubmit\"], [\"ldpForm\", \"ngForm\"], [1, \"form-group\", \"row\"], [1, \"col\"], [\"for\", \"nombre\"], [\"type\", \"text\", \"id\", \"nombre\", \"name\", \"nombre\", \"placeholder\", \"Ingrese un nombre para la nueva lista de precios\", \"required\", \"\", 1, \"form-control\", \"col-sm-12\", 3, \"ngModel\", \"ngModelChange\"], [\"nombre\", \"ngModel\"], [\"for\", \"fecha\"], [\"disabled\", \"\", \"type\", \"date\", \"name\", \"fechaDeCreacion\", 1, \"form-control\", \"col-sm-4\", 3, \"ngModel\", \"ngModelChange\"], [\"appearance\", \"fill\", 1, \"example-full-width\"], [\"matInput\", \"\", \"placeholder\", \"Ej.. Lista de precios general aplicable a cualquier sucursal...\", \"name\", \"descripcion\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"descripcion\", \"ngModel\"], [\"appearance\", \"fill\"], [3, \"value\", \"valueChange\"], [\"value\", \"\", 3, \"onSelectionChange\"], [3, \"value\", \"onSelectionChange\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"dtBasicExample\", \"cellspacing\", \"0\", \"width\", \"100%\", 1, \"table\", \"table-striped\", \"table-hover\"], [1, \"th-sm\"], [\"align\", \"center\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-10\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"alert alert-danger alert-dismissible fade show mt-2\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"coll-ms-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-danger\", 3, \"routerLink\", \"routerLinkActive\"], [3, \"value\", \"onSelectionChange\"], [1, \"align-middle\"], [4, \"ngIf\", \"ngIfElse\"], [\"fechaCompra\", \"\"], [\"precioCompra\", \"\"], [\"align\", \"right\", 1, \"align-middle\"], [1, \"row\"], [\"diferencia\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"alert-dismissible\", \"fade\", \"show\", \"mt-2\"], [\"type\", \"button\", \"data-dismiss\", \"alert\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"]],\n  template: function NewldpComponent_Template(rf, ctx) {\n    if (rf & 1) {\n      const _r26 = i0.ɵɵgetCurrentView();\n\n      i0.ɵɵelementStart(0, \"h1\");\n      i0.ɵɵtext(1, \"L i s t a D e P r e c i o s\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(2, \"div\", 0);\n      i0.ɵɵelementStart(3, \"div\", 1);\n      i0.ɵɵtext(4, \" Registro de listas de precios \");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(5, \"div\", 2);\n      i0.ɵɵelementStart(6, \"form\", 3, 4);\n      i0.ɵɵlistener(\"ngSubmit\", function NewldpComponent_Template_form_ngSubmit_6_listener() {\n        i0.ɵɵrestoreView(_r26);\n\n        const _r0 = i0.ɵɵreference(7);\n\n        return ctx.onSubmit(_r0);\n      });\n      i0.ɵɵelementStart(8, \"div\", 5);\n      i0.ɵɵelementStart(9, \"div\", 6);\n      i0.ɵɵelementStart(10, \"label\", 7);\n      i0.ɵɵtext(11, \"Nombre\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(12, \"input\", 8, 9);\n      i0.ɵɵlistener(\"ngModelChange\", function NewldpComponent_Template_input_ngModelChange_12_listener($event) {\n        return ctx.ldpNombre = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(14, \"div\", 6);\n      i0.ɵɵelementStart(15, \"label\", 10);\n      i0.ɵɵtext(16, \"Fecha\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"input\", 11);\n      i0.ɵɵlistener(\"ngModelChange\", function NewldpComponent_Template_input_ngModelChange_17_listener($event) {\n        return ctx.fechaDeCreacion = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(18, \"div\", 5);\n      i0.ɵɵelementStart(19, \"mat-form-field\", 12);\n      i0.ɵɵelementStart(20, \"mat-label\");\n      i0.ɵɵtext(21, \"Descripcion\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"textarea\", 13, 14);\n      i0.ɵɵlistener(\"ngModelChange\", function NewldpComponent_Template_textarea_ngModelChange_22_listener($event) {\n        return ctx.ldpDescripcion = $event;\n      });\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(24, \"hr\");\n      i0.ɵɵelementStart(25, \"mat-form-field\", 15);\n      i0.ɵɵelementStart(26, \"mat-label\");\n      i0.ɵɵtext(27, \"Referencias de costos/stock\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(28, \"mat-select\", 16);\n      i0.ɵɵlistener(\"valueChange\", function NewldpComponent_Template_mat_select_valueChange_28_listener($event) {\n        return ctx.referenciaCostosStock = $event;\n      });\n      i0.ɵɵelementStart(29, \"mat-option\", 17);\n      i0.ɵɵlistener(\"onSelectionChange\", function NewldpComponent_Template_mat_option_onSelectionChange_29_listener($event) {\n        return ctx.actualizarRefCostosStock($event);\n      });\n      i0.ɵɵtext(30, \"SinReferencia\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(31, NewldpComponent_mat_option_31_Template, 2, 2, \"mat-option\", 18);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(32, \"table\", 19);\n      i0.ɵɵelementStart(33, \"thead\");\n      i0.ɵɵelementStart(34, \"tr\");\n      i0.ɵɵelementStart(35, \"th\", 20);\n      i0.ɵɵtext(36, \"#\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(37, \"th\", 20);\n      i0.ɵɵtext(38, \"Producto\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(39, \"th\", 20);\n      i0.ɵɵtext(40, \"Rubro\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(41, \"th\", 20);\n      i0.ɵɵtext(42, \"Codigo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(43, \"th\", 20);\n      i0.ɵɵtext(44, \"Stock\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(45, \"th\", 20);\n      i0.ɵɵtext(46, \"Fecha Ultima Compra\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(47, \"th\", 20);\n      i0.ɵɵtext(48, \"Costo\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(49, \"th\", 20);\n      i0.ɵɵtext(50, \"Precio de venta\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(51, \"th\", 21);\n      i0.ɵɵtext(52, \"Dif\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(53, NewldpComponent_tbody_53_Template, 30, 15, \"tbody\", 22);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(54, \"div\", 5);\n      i0.ɵɵelementStart(55, \"div\", 23);\n      i0.ɵɵelementStart(56, \"button\", 24);\n      i0.ɵɵlistener(\"click\", function NewldpComponent_Template_button_click_56_listener() {\n        return ctx.registrarListaDePrecios();\n      });\n      i0.ɵɵtext(57, \"Crear\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵtemplate(58, NewldpComponent_div_58_Template, 11, 0, \"div\", 25);\n      i0.ɵɵtemplate(59, NewldpComponent_div_59_Template, 8, 0, \"div\", 25);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(60, \"div\", 26);\n      i0.ɵɵelementStart(61, \"button\", 27);\n      i0.ɵɵtext(62, \"Volver\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      const _r0 = i0.ɵɵreference(7);\n\n      const _r1 = i0.ɵɵreference(13);\n\n      const _r2 = i0.ɵɵreference(23);\n\n      i0.ɵɵadvance(12);\n      i0.ɵɵproperty(\"ngModel\", ctx.ldpNombre);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.fechaDeCreacion);\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"ngModel\", ctx.ldpDescripcion);\n      i0.ɵɵadvance(6);\n      i0.ɵɵproperty(\"value\", ctx.referenciaCostosStock);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngForOf\", ctx.branchesByStore);\n      i0.ɵɵadvance(22);\n      i0.ɵɵproperty(\"ngForOf\", ctx._productsList);\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"ngIf\", _r1.touched && !_r1.valid);\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"ngIf\", _r2.touched && !_r2.valid);\n      i0.ɵɵadvance(2);\n      i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(12, _c0, \"/tienda/\" + ctx.storeId + \"/ldp/\"))(\"routerLinkActive\", i0.ɵɵpureFunction0(14, _c1))(\"routerLinkActive\", i0.ɵɵpureFunction0(15, _c1));\n    }\n  },\n  directives: [i7.ɵNgNoValidate, i7.NgControlStatusGroup, i7.NgForm, i7.DefaultValueAccessor, i7.RequiredValidator, i7.NgControlStatus, i7.NgModel, i8.MatFormField, i8.MatLabel, i9.MatInput, i10.MatSelect, i11.MatOption, i12.NgForOf, i12.NgIf, i5.RouterLink, i5.RouterLinkActive, i13.MatButton],\n  pipes: [i12.CurrencyPipe, i12.DatePipe],\n  encapsulation: 2\n});","map":{"version":3,"sources":["C:/Users/CESAR/apiREST-LenguaDeLoro/frontendLenguaDeLoro/src/app/components/store/storeDashboard/storeLdP/new/newldp/newldp.component.ts"],"names":["DialogprecioComponent","productOfLDP","i0","i1","i2","i3","i4","i5","i6","i7","i8","i9","i10","i11","i12","i13","NewldpComponent_mat_option_31_Template","rf","ctx","_r9","ɵɵgetCurrentView","ɵɵelementStart","ɵɵlistener","NewldpComponent_mat_option_31_Template_mat_option_onSelectionChange_0_listener","$event","ɵɵrestoreView","ctx_r8","ɵɵnextContext","actualizarRefCostosStock","ɵɵtext","ɵɵelementEnd","branch_r7","$implicit","ɵɵpropertyInterpolate","_id","ɵɵadvance","ɵɵtextInterpolate","branchName","NewldpComponent_tbody_53_ng_container_12_Template","ɵɵelementContainerStart","ɵɵelementContainerEnd","NewldpComponent_tbody_53_ng_template_13_Template","ɵɵpipe","i_r11","index","ctx_r14","ɵɵtextInterpolate1","ɵɵpipeBind2","_productsList","fechaUltimaCompra","NewldpComponent_tbody_53_ng_container_15_Template","NewldpComponent_tbody_53_ng_template_16_Template","ctx_r17","costoUnitario","NewldpComponent_tbody_53_ng_container_24_Template","ctx_r18","precioVenta","NewldpComponent_tbody_53_ng_template_25_Template","NewldpComponent_tbody_53_Template","_r25","ɵɵtemplate","ɵɵtemplateRefExtractor","NewldpComponent_tbody_53_Template_button_click_28_listener","restoredCtx","ctx_r24","openDialogPrecio","productName","_r13","ɵɵreference","_r16","_r19","ctx_r4","rubro","codigo","stock","ɵɵproperty","NewldpComponent_div_58_Template","NewldpComponent_div_59_Template","_c0","a0","_c1","NewldpComponent","constructor","_productService","_branchService","_listadeprecioService","_userService","_route","_router","dialog","listaOrigenIdparaClonar","referenciaCostosStock","fechaDeCreacion","Date","toISOString","split","ngOnInit","enviarListId","subscribe","data","setListaId","params","storeId","getBranchesByStoreId","getProductosByStoreIdAndPopulate","onSubmit","form","registrarListaDePrecios","registrarNuevaLDP","ldpNombre","ldpDescripcion","next","v","console","log","navigate","error","e","complete","info","branches","branchesByStore","slice","productos","arrayProductos","producto","push","productOfLDPnew","categoriaRubro","categoryName","products","listaDpQueQuieroClonar","getListaId","clearListaId","getListaDpByIdAndPopulateProducts","listaId","listaFound","listadpOriginal","JSON","stringify","parse","ldpProducts","entries","localizarTodasLasInstancias","propiedad","valor","filter","element","productoEncontrado","length","message","event","isUserInput","source","value","selected","_newProductList","findIndex","object","i","indexProd","product","precioUnitUltCompra","cantidad","precioCompra","dialogRef","open","width","afterClosed","result","Number","ɵfac","NewldpComponent_Factory","t","ɵɵdirectiveInject","ProductService","BranchService","ListadepreciosService","UserService","ActivatedRoute","Router","MatDialog","ɵcmp","ɵɵdefineComponent","type","selectors","decls","vars","consts","template","NewldpComponent_Template","_r26","NewldpComponent_Template_form_ngSubmit_6_listener","_r0","NewldpComponent_Template_input_ngModelChange_12_listener","NewldpComponent_Template_input_ngModelChange_17_listener","NewldpComponent_Template_textarea_ngModelChange_22_listener","ɵɵelement","NewldpComponent_Template_mat_select_valueChange_28_listener","NewldpComponent_Template_mat_option_onSelectionChange_29_listener","NewldpComponent_Template_button_click_56_listener","_r1","_r2","valid","touched","ɵɵpureFunction1","ɵɵpureFunction0","directives","ɵNgNoValidate","NgControlStatusGroup","NgForm","DefaultValueAccessor","RequiredValidator","NgControlStatus","NgModel","MatFormField","MatLabel","MatInput","MatSelect","MatOption","NgForOf","NgIf","RouterLink","RouterLinkActive","MatButton","pipes","CurrencyPipe","DatePipe","encapsulation"],"mappings":"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","sourcesContent":["import { DialogprecioComponent } from '../../dialogPrecio/dialogprecio/dialogprecio.component';\r\nimport { productOfLDP } from '../../../../../../models/productOfLDP';\r\nimport * as i0 from \"@angular/core\";\r\nimport * as i1 from \"../../../../../../../app/services/product.service\";\r\nimport * as i2 from \"src/app/services/branch.service\";\r\nimport * as i3 from \"../../../../../../services/listadeprecios.service\";\r\nimport * as i4 from \"../../../../../../services/user.service\";\r\nimport * as i5 from \"@angular/router\";\r\nimport * as i6 from \"@angular/material/dialog\";\r\nimport * as i7 from \"@angular/forms\";\r\nimport * as i8 from \"@angular/material/form-field\";\r\nimport * as i9 from \"@angular/material/input\";\r\nimport * as i10 from \"@angular/material/select\";\r\nimport * as i11 from \"@angular/material/core\";\r\nimport * as i12 from \"@angular/common\";\r\nimport * as i13 from \"@angular/material/button\";\r\nfunction NewldpComponent_mat_option_31_Template(rf, ctx) { if (rf & 1) {\r\n    const _r9 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"mat-option\", 28);\r\n    i0.ɵɵlistener(\"onSelectionChange\", function NewldpComponent_mat_option_31_Template_mat_option_onSelectionChange_0_listener($event) { i0.ɵɵrestoreView(_r9); const ctx_r8 = i0.ɵɵnextContext(); return ctx_r8.actualizarRefCostosStock($event); });\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const branch_r7 = ctx.$implicit;\r\n    i0.ɵɵpropertyInterpolate(\"value\", branch_r7._id);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(branch_r7.branchName);\r\n} }\r\nfunction NewldpComponent_tbody_53_ng_container_12_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵelementStart(1, \"td\", 29);\r\n    i0.ɵɵtext(2, \"-\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementContainerEnd();\r\n} }\r\nfunction NewldpComponent_tbody_53_ng_template_13_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"td\", 29);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵpipe(2, \"date\");\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const i_r11 = i0.ɵɵnextContext().index;\r\n    const ctx_r14 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(2, 1, ctx_r14._productsList[i_r11].fechaUltimaCompra, \"MM/dd/yyyy h:mm:ss\"), \" \");\r\n} }\r\nfunction NewldpComponent_tbody_53_ng_container_15_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵelementStart(1, \"td\", 29);\r\n    i0.ɵɵtext(2, \"-\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementContainerEnd();\r\n} }\r\nfunction NewldpComponent_tbody_53_ng_template_16_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"td\", 29);\r\n    i0.ɵɵtext(1);\r\n    i0.ɵɵpipe(2, \"currency\");\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const i_r11 = i0.ɵɵnextContext().index;\r\n    const ctx_r17 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(2, 1, ctx_r17._productsList[i_r11].costoUnitario, \"$\"));\r\n} }\r\nfunction NewldpComponent_tbody_53_ng_container_24_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementContainerStart(0);\r\n    i0.ɵɵelementStart(1, \"td\", 29);\r\n    i0.ɵɵtext(2);\r\n    i0.ɵɵpipe(3, \"currency\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementContainerEnd();\r\n} if (rf & 2) {\r\n    const i_r11 = i0.ɵɵnextContext().index;\r\n    const ctx_r18 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate1(\"\", i0.ɵɵpipeBind2(3, 1, ctx_r18._productsList[i_r11].precioVenta - ctx_r18._productsList[i_r11].costoUnitario, \"$\"), \" \");\r\n} }\r\nfunction NewldpComponent_tbody_53_ng_template_25_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"td\", 29);\r\n    i0.ɵɵtext(1, \"-\");\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction NewldpComponent_tbody_53_Template(rf, ctx) { if (rf & 1) {\r\n    const _r25 = i0.ɵɵgetCurrentView();\r\n    i0.ɵɵelementStart(0, \"tbody\");\r\n    i0.ɵɵelementStart(1, \"tr\");\r\n    i0.ɵɵelementStart(2, \"td\", 29);\r\n    i0.ɵɵtext(3);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(4, \"td\", 29);\r\n    i0.ɵɵtext(5);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(6, \"td\", 29);\r\n    i0.ɵɵtext(7);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(8, \"td\", 29);\r\n    i0.ɵɵtext(9);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(10, \"td\", 29);\r\n    i0.ɵɵtext(11);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtemplate(12, NewldpComponent_tbody_53_ng_container_12_Template, 3, 0, \"ng-container\", 30);\r\n    i0.ɵɵtemplate(13, NewldpComponent_tbody_53_ng_template_13_Template, 3, 4, \"ng-template\", null, 31, i0.ɵɵtemplateRefExtractor);\r\n    i0.ɵɵtemplate(15, NewldpComponent_tbody_53_ng_container_15_Template, 3, 0, \"ng-container\", 30);\r\n    i0.ɵɵtemplate(16, NewldpComponent_tbody_53_ng_template_16_Template, 3, 4, \"ng-template\", null, 32, i0.ɵɵtemplateRefExtractor);\r\n    i0.ɵɵelementStart(18, \"td\", 33);\r\n    i0.ɵɵtext(19);\r\n    i0.ɵɵpipe(20, \"currency\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(21, \"td\", 29);\r\n    i0.ɵɵelementStart(22, \"div\", 34);\r\n    i0.ɵɵelementStart(23, \"div\", 6);\r\n    i0.ɵɵtemplate(24, NewldpComponent_tbody_53_ng_container_24_Template, 4, 4, \"ng-container\", 30);\r\n    i0.ɵɵtemplate(25, NewldpComponent_tbody_53_ng_template_25_Template, 2, 0, \"ng-template\", null, 35, i0.ɵɵtemplateRefExtractor);\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementStart(27, \"div\", 6);\r\n    i0.ɵɵelementStart(28, \"button\", 36);\r\n    i0.ɵɵlistener(\"click\", function NewldpComponent_tbody_53_Template_button_click_28_listener() { const restoredCtx = i0.ɵɵrestoreView(_r25); const i_r11 = restoredCtx.index; const ctx_r24 = i0.ɵɵnextContext(); return ctx_r24.openDialogPrecio(ctx_r24._productsList[i_r11].costoUnitario, ctx_r24._productsList[i_r11].productName, ctx_r24._productsList[i_r11].precioVenta, i_r11); });\r\n    i0.ɵɵtext(29, \"Edit\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} if (rf & 2) {\r\n    const i_r11 = ctx.index;\r\n    const _r13 = i0.ɵɵreference(14);\r\n    const _r16 = i0.ɵɵreference(17);\r\n    const _r19 = i0.ɵɵreference(26);\r\n    const ctx_r4 = i0.ɵɵnextContext();\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵtextInterpolate(i_r11);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(ctx_r4._productsList[i_r11].productName);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(ctx_r4._productsList[i_r11].rubro);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(ctx_r4._productsList[i_r11].codigo);\r\n    i0.ɵɵadvance(2);\r\n    i0.ɵɵtextInterpolate(ctx_r4._productsList[i_r11].stock);\r\n    i0.ɵɵadvance(1);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r4._productsList[i_r11].fechaUltimaCompra && ctx_r4._productsList[i_r11].fechaUltimaCompra === \"-\")(\"ngIfElse\", _r13);\r\n    i0.ɵɵadvance(3);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r4._productsList[i_r11].fechaUltimaCompra === \"-\")(\"ngIfElse\", _r16);\r\n    i0.ɵɵadvance(4);\r\n    i0.ɵɵtextInterpolate(i0.ɵɵpipeBind2(20, 12, ctx_r4._productsList[i_r11].precioVenta, \"$\"));\r\n    i0.ɵɵadvance(5);\r\n    i0.ɵɵproperty(\"ngIf\", ctx_r4._productsList[i_r11].fechaUltimaCompra != \"-\" && ctx_r4._productsList[i_r11].precioVenta > 0)(\"ngIfElse\", _r19);\r\n} }\r\nfunction NewldpComponent_div_58_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 37);\r\n    i0.ɵɵtext(1, \" Ingrese un \");\r\n    i0.ɵɵelementStart(2, \"strong\");\r\n    i0.ɵɵtext(3, \"nombre \");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtext(4, \" para la nueva \");\r\n    i0.ɵɵelementStart(5, \"strong\");\r\n    i0.ɵɵtext(6, \"Lista de precios\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtext(7, \" antes confirmar! \");\r\n    i0.ɵɵelementStart(8, \"button\", 38);\r\n    i0.ɵɵelementStart(9, \"span\", 39);\r\n    i0.ɵɵtext(10, \"\\u00D7\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} }\r\nfunction NewldpComponent_div_59_Template(rf, ctx) { if (rf & 1) {\r\n    i0.ɵɵelementStart(0, \"div\", 37);\r\n    i0.ɵɵtext(1, \" Ingrese una \");\r\n    i0.ɵɵelementStart(2, \"strong\");\r\n    i0.ɵɵtext(3, \"descripci\\u00F3n \");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵtext(4, \" del uso que se le dat\\u00E1 a la nueva Lista de Precios para poder confirmar! \");\r\n    i0.ɵɵelementStart(5, \"button\", 38);\r\n    i0.ɵɵelementStart(6, \"span\", 39);\r\n    i0.ɵɵtext(7, \"\\u00D7\");\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n    i0.ɵɵelementEnd();\r\n} }\r\nconst _c0 = function (a0) { return [a0]; };\r\nconst _c1 = function () { return [\"actived\"]; };\r\nexport class NewldpComponent {\r\n    constructor(_productService, _branchService, _listadeprecioService, _userService, _route, _router, dialog) {\r\n        this._productService = _productService;\r\n        this._branchService = _branchService;\r\n        this._listadeprecioService = _listadeprecioService;\r\n        this._userService = _userService;\r\n        this._route = _route;\r\n        this._router = _router;\r\n        this.dialog = dialog;\r\n        this._productsList = []; //contiene todos los productos de la lista de precios tal cual como se van a almacenar en la DB\r\n        this.listaOrigenIdparaClonar = \"\"; //Es el id de la lista que quiero clonar.\r\n        this.referenciaCostosStock = \"\";\r\n        this.fechaDeCreacion = new Date().toISOString().split('T')[0];\r\n    }\r\n    async ngOnInit() {\r\n        // PASO 1: VERIFICO si esto es una copia de una lista o es una lista nueva 100%\r\n        this._listadeprecioService.enviarListId.subscribe(data => {\r\n            this._listadeprecioService.setListaId(data.data);\r\n        });\r\n        //Lo primero que tengo que hacer es obtener el storeId\r\n        this._route.params.subscribe(params => {\r\n            this.storeId = params['id'];\r\n            //una vez que tengo el storeId puedo traerme la lista de productos de esta storeId\r\n            this.getBranchesByStoreId(this.storeId);\r\n            this.getProductosByStoreIdAndPopulate(this.storeId);\r\n        });\r\n    }\r\n    onSubmit(form) {\r\n    }\r\n    registrarListaDePrecios() {\r\n        this._listadeprecioService.registrarNuevaLDP(this._productsList, this.ldpNombre, this.ldpDescripcion, this.fechaDeCreacion, this.storeId)\r\n            .subscribe({\r\n            next: (v) => {\r\n                console.log(\"MENSAJE: despues del registrarNuevaLDP\");\r\n                console.log(v);\r\n                this._router.navigate(['/tienda', this.storeId, 'ldp']);\r\n            },\r\n            error: (e) => {\r\n                console.log(e.error);\r\n            },\r\n            complete: () => console.info('complete')\r\n        });\r\n    }\r\n    getBranchesByStoreId(storeId) {\r\n        this._branchService.getBranchesByStoreId(storeId)\r\n            .subscribe({\r\n            next: (branches) => {\r\n                console.log(\"estas son las branches que encontré\");\r\n                console.log(branches);\r\n                this.branchesByStore = branches.slice();\r\n            },\r\n            error: (e) => console.error(e),\r\n            complete: async () => { }\r\n        });\r\n    }\r\n    getProductosByStoreIdAndPopulate(storeId) {\r\n        this._productService.getProductosByStoreIdAndPopulate(storeId)\r\n            .subscribe({\r\n            next: (productos) => {\r\n                let arrayProductos = []; // es una variable auxiliar. contiene lo mismo que el array de productos pero con los datos bien formateados. una vez formateado correctamete se pisa el array de productos.\r\n                //tengo que agarrar la lista de productos que recibí del backend y formatearla para poder usarla aca\r\n                // voy a reemplazar por un (-) lo valores que pueden ser null\r\n                //paso todos los productos a un nuevo array arrayProductos con los datos bien formateados(sin null)\r\n                for (let producto of productos) {\r\n                    //no tengo mas la clave ultimoRegCompra. hago esto para que siga funcionando. ningun producto va a tener un ultimo reg de compra de esta lista\r\n                    /*\r\n                    if(producto.ultimoRegCompra === null){\r\n                      let regCompra = {\r\n                        fechaDeCompra:\"-\",\r\n                        precioCompraUnitario: \"-\"\r\n                      }\r\n                      producto.ultimoRegCompra = regCompra\r\n                    }\r\n                    */\r\n                    //producto.ultimoRegCompra.fechaDeCompra=\"-\";             ///agrego esto para salvar\r\n                    //producto.ultimoRegCompra.precioCompraUnitario = \"-\"     ///agrego esto para salvar\r\n                    producto.precioVenta = null;\r\n                    arrayProductos.push(producto);\r\n                    //creo los elementos que voy a almacenar dentro de la lista de precios \r\n                    //defino la estructura del elemento que voy a guardar en la lista de procutos\r\n                    let productOfLDPnew = new productOfLDP(producto._id, producto.productName, producto.categoriaRubro.categoryName, producto.codigo, producto.stock, \"-\", //producto.ultimoRegCompra.fechaDeCompra,\r\n                    0, //producto.ultimoRegCompra.precioCompraUnitario,\r\n                    producto.precioVenta);\r\n                    //guardo todos estos elementos en un array (_productList)\r\n                    this._productsList.push(productOfLDPnew);\r\n                    //this._listadeprecioService.addProductTothelist(productOfLDPnew)\r\n                }\r\n                this.products = arrayProductos;\r\n                console.log(\"this.products---------------son todos los productos que tiene la tienda. lo recibo del backend\");\r\n                console.log(this.products);\r\n            },\r\n            error: (e) => console.error(e),\r\n            complete: async () => {\r\n                //despues de traer la lista completa de productos de la tienda VOY A VER SI TENGO QUE CLONAR O CREAR UNA LISTA NUEVA\r\n                let listaDpQueQuieroClonar = await this._listadeprecioService.getListaId();\r\n                if (listaDpQueQuieroClonar != \"\") { //si esta variable es distinta de \"\" es porque ESTOY INTENTANDO CLONAR UNA LISTA DE PRECIOS\r\n                    console.log(\"MENSAJE: Intentando clonar lista de precios listaId: \" + listaDpQueQuieroClonar);\r\n                    this.listaOrigenIdparaClonar = listaDpQueQuieroClonar;\r\n                    //LIMPIO LA variable para evitar problemas\r\n                    this._listadeprecioService.clearListaId();\r\n                }\r\n                console.log(\"compleeeeeeeeeeeeeeeeeeeeeeeeeete\");\r\n                console.log(\"listaOrigenIdparaClonar\");\r\n                console.log(this.listaOrigenIdparaClonar);\r\n                console.log(\"lista completa de productos de la tienda\");\r\n                console.log(this._productsList);\r\n                if (this.listaOrigenIdparaClonar && this._productsList) {\r\n                    console.log(\"MENSAJE: Copia de Lista de precios. obteniendo informacion de lista de precios ID: \" + this.listaOrigenIdparaClonar);\r\n                    this.getListaDpByIdAndPopulateProducts(this.listaOrigenIdparaClonar);\r\n                }\r\n            }\r\n        });\r\n    }\r\n    getListaDpByIdAndPopulateProducts(listaId) {\r\n        this._listadeprecioService.getListaDpByIdAndPopulateProducts(listaId)\r\n            .subscribe({\r\n            next: (listaFound) => {\r\n                console.log(\"MENSAJE: Lista de precios id: \" + listaId + \" recibida exitosamente.\");\r\n                console.log(listaFound);\r\n                //no podia leer la listaFoun asi que hago esto y ahora anda\r\n                this.listadpOriginal = JSON.stringify(listaFound);\r\n                this.listadpOriginal = JSON.parse(this.listadpOriginal);\r\n                //---------------------------------------\r\n                console.log(\"esta es la lista de precio original\");\r\n                console.log(this.listadpOriginal);\r\n                console.log(this.listadpOriginal.ldpProducts);\r\n                console.log(\"esta es la lista completa de todos los producto de la tienda\");\r\n                console.log(this._productsList);\r\n                console.log(\"forrr-----------------------------------------------------------\");\r\n                for (let [index, producto] of this._productsList.entries()) {\r\n                    const localizarTodasLasInstancias = (propiedad, valor) => {\r\n                        return this.listadpOriginal.ldpProducts.filter((element) => {\r\n                            return element[propiedad] === valor;\r\n                        });\r\n                    };\r\n                    console.log(\"busco este producto en this.listaOrigen.products \" + producto._id);\r\n                    let productoEncontrado = localizarTodasLasInstancias('product', producto._id);\r\n                    if (productoEncontrado.length > 0) {\r\n                        console.log(\"indice: \" + index + \" - producto: \");\r\n                        console.log(productoEncontrado);\r\n                        console.log(this._productsList[index].precioVenta + \"  -  \" + productoEncontrado[0].precioVenta);\r\n                        this._productsList[index].precioVenta = productoEncontrado[0].precioVenta;\r\n                        //this._productsList[index].precioVenta = productoEncontrado[0].\r\n                    }\r\n                }\r\n                console.log(\"forrr-----------------------------------------------------------\");\r\n                console.log(\"los productos despues del gfor\");\r\n                console.log(this._productsList);\r\n            },\r\n            error: (e) => {\r\n                console.error(e.error.message);\r\n            },\r\n            complete: () => {\r\n                console.log(\"el complte de obtener la listaaaa\");\r\n            }\r\n        });\r\n    }\r\n    actualizarRefCostosStock(event) {\r\n        if (event.isUserInput) {\r\n            console.log(event.source.value, event.source.selected);\r\n            let _newProductList = [];\r\n            const index = this.branchesByStore.findIndex((object) => {\r\n                return object._id == event.source.value;\r\n            });\r\n            for (let [i, producto] of this._productsList.entries()) {\r\n                const indexProd = this.branchesByStore[index].stock.findIndex((object) => {\r\n                    return object.product == producto._id;\r\n                });\r\n                this._productsList[i].fechaUltimaCompra = \"\";\r\n                this._productsList[i].costoUnitario = this.branchesByStore[index].stock[indexProd].precioUnitUltCompra;\r\n                this._productsList[i].stock = this.branchesByStore[index].stock[indexProd].cantidad;\r\n            }\r\n        }\r\n    }\r\n    openDialogPrecio(precioCompra, productName, precioVenta, index) {\r\n        const dialogRef = this.dialog.open(DialogprecioComponent, {\r\n            width: '50%',\r\n            data: { 'precioCompra': precioCompra,\r\n                'productName': productName,\r\n                'precioVenta': precioVenta\r\n            }\r\n        });\r\n        dialogRef.afterClosed().subscribe(result => {\r\n            console.log(`Dialog result: ${result}`);\r\n            if (`${result}` != \"close\") {\r\n                this._productsList[index].precioVenta = Number(`${result}`);\r\n            }\r\n        });\r\n    }\r\n}\r\nNewldpComponent.ɵfac = function NewldpComponent_Factory(t) { return new (t || NewldpComponent)(i0.ɵɵdirectiveInject(i1.ProductService), i0.ɵɵdirectiveInject(i2.BranchService), i0.ɵɵdirectiveInject(i3.ListadepreciosService), i0.ɵɵdirectiveInject(i4.UserService), i0.ɵɵdirectiveInject(i5.ActivatedRoute), i0.ɵɵdirectiveInject(i5.Router), i0.ɵɵdirectiveInject(i6.MatDialog)); };\r\nNewldpComponent.ɵcmp = /*@__PURE__*/ i0.ɵɵdefineComponent({ type: NewldpComponent, selectors: [[\"app-newldp\"]], decls: 63, vars: 16, consts: [[1, \"card\"], [1, \"card-header\"], [1, \"card-body\"], [3, \"ngSubmit\"], [\"ldpForm\", \"ngForm\"], [1, \"form-group\", \"row\"], [1, \"col\"], [\"for\", \"nombre\"], [\"type\", \"text\", \"id\", \"nombre\", \"name\", \"nombre\", \"placeholder\", \"Ingrese un nombre para la nueva lista de precios\", \"required\", \"\", 1, \"form-control\", \"col-sm-12\", 3, \"ngModel\", \"ngModelChange\"], [\"nombre\", \"ngModel\"], [\"for\", \"fecha\"], [\"disabled\", \"\", \"type\", \"date\", \"name\", \"fechaDeCreacion\", 1, \"form-control\", \"col-sm-4\", 3, \"ngModel\", \"ngModelChange\"], [\"appearance\", \"fill\", 1, \"example-full-width\"], [\"matInput\", \"\", \"placeholder\", \"Ej.. Lista de precios general aplicable a cualquier sucursal...\", \"name\", \"descripcion\", \"required\", \"\", 3, \"ngModel\", \"ngModelChange\"], [\"descripcion\", \"ngModel\"], [\"appearance\", \"fill\"], [3, \"value\", \"valueChange\"], [\"value\", \"\", 3, \"onSelectionChange\"], [3, \"value\", \"onSelectionChange\", 4, \"ngFor\", \"ngForOf\"], [\"id\", \"dtBasicExample\", \"cellspacing\", \"0\", \"width\", \"100%\", 1, \"table\", \"table-striped\", \"table-hover\"], [1, \"th-sm\"], [\"align\", \"center\"], [4, \"ngFor\", \"ngForOf\"], [1, \"col-sm-10\"], [1, \"btn\", \"btn-primary\", 3, \"disabled\", \"click\"], [\"class\", \"alert alert-danger alert-dismissible fade show mt-2\", \"role\", \"alert\", 4, \"ngIf\"], [1, \"coll-ms-2\"], [\"type\", \"submit\", 1, \"btn\", \"btn-outline-danger\", 3, \"routerLink\", \"routerLinkActive\"], [3, \"value\", \"onSelectionChange\"], [1, \"align-middle\"], [4, \"ngIf\", \"ngIfElse\"], [\"fechaCompra\", \"\"], [\"precioCompra\", \"\"], [\"align\", \"right\", 1, \"align-middle\"], [1, \"row\"], [\"diferencia\", \"\"], [\"mat-raised-button\", \"\", \"color\", \"primary\", 3, \"click\"], [\"role\", \"alert\", 1, \"alert\", \"alert-danger\", \"alert-dismissible\", \"fade\", \"show\", \"mt-2\"], [\"type\", \"button\", \"data-dismiss\", \"alert\", \"aria-label\", \"Close\", 1, \"close\"], [\"aria-hidden\", \"true\"]], template: function NewldpComponent_Template(rf, ctx) { if (rf & 1) {\r\n        const _r26 = i0.ɵɵgetCurrentView();\r\n        i0.ɵɵelementStart(0, \"h1\");\r\n        i0.ɵɵtext(1, \"L i s t a D e P r e c i o s\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(2, \"div\", 0);\r\n        i0.ɵɵelementStart(3, \"div\", 1);\r\n        i0.ɵɵtext(4, \" Registro de listas de precios \");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(5, \"div\", 2);\r\n        i0.ɵɵelementStart(6, \"form\", 3, 4);\r\n        i0.ɵɵlistener(\"ngSubmit\", function NewldpComponent_Template_form_ngSubmit_6_listener() { i0.ɵɵrestoreView(_r26); const _r0 = i0.ɵɵreference(7); return ctx.onSubmit(_r0); });\r\n        i0.ɵɵelementStart(8, \"div\", 5);\r\n        i0.ɵɵelementStart(9, \"div\", 6);\r\n        i0.ɵɵelementStart(10, \"label\", 7);\r\n        i0.ɵɵtext(11, \"Nombre\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(12, \"input\", 8, 9);\r\n        i0.ɵɵlistener(\"ngModelChange\", function NewldpComponent_Template_input_ngModelChange_12_listener($event) { return ctx.ldpNombre = $event; });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(14, \"div\", 6);\r\n        i0.ɵɵelementStart(15, \"label\", 10);\r\n        i0.ɵɵtext(16, \"Fecha\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(17, \"input\", 11);\r\n        i0.ɵɵlistener(\"ngModelChange\", function NewldpComponent_Template_input_ngModelChange_17_listener($event) { return ctx.fechaDeCreacion = $event; });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(18, \"div\", 5);\r\n        i0.ɵɵelementStart(19, \"mat-form-field\", 12);\r\n        i0.ɵɵelementStart(20, \"mat-label\");\r\n        i0.ɵɵtext(21, \"Descripcion\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(22, \"textarea\", 13, 14);\r\n        i0.ɵɵlistener(\"ngModelChange\", function NewldpComponent_Template_textarea_ngModelChange_22_listener($event) { return ctx.ldpDescripcion = $event; });\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelement(24, \"hr\");\r\n        i0.ɵɵelementStart(25, \"mat-form-field\", 15);\r\n        i0.ɵɵelementStart(26, \"mat-label\");\r\n        i0.ɵɵtext(27, \"Referencias de costos/stock\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(28, \"mat-select\", 16);\r\n        i0.ɵɵlistener(\"valueChange\", function NewldpComponent_Template_mat_select_valueChange_28_listener($event) { return ctx.referenciaCostosStock = $event; });\r\n        i0.ɵɵelementStart(29, \"mat-option\", 17);\r\n        i0.ɵɵlistener(\"onSelectionChange\", function NewldpComponent_Template_mat_option_onSelectionChange_29_listener($event) { return ctx.actualizarRefCostosStock($event); });\r\n        i0.ɵɵtext(30, \"SinReferencia\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(31, NewldpComponent_mat_option_31_Template, 2, 2, \"mat-option\", 18);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(32, \"table\", 19);\r\n        i0.ɵɵelementStart(33, \"thead\");\r\n        i0.ɵɵelementStart(34, \"tr\");\r\n        i0.ɵɵelementStart(35, \"th\", 20);\r\n        i0.ɵɵtext(36, \"#\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(37, \"th\", 20);\r\n        i0.ɵɵtext(38, \"Producto\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(39, \"th\", 20);\r\n        i0.ɵɵtext(40, \"Rubro\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(41, \"th\", 20);\r\n        i0.ɵɵtext(42, \"Codigo\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(43, \"th\", 20);\r\n        i0.ɵɵtext(44, \"Stock\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(45, \"th\", 20);\r\n        i0.ɵɵtext(46, \"Fecha Ultima Compra\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(47, \"th\", 20);\r\n        i0.ɵɵtext(48, \"Costo\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(49, \"th\", 20);\r\n        i0.ɵɵtext(50, \"Precio de venta\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(51, \"th\", 21);\r\n        i0.ɵɵtext(52, \"Dif\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(53, NewldpComponent_tbody_53_Template, 30, 15, \"tbody\", 22);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(54, \"div\", 5);\r\n        i0.ɵɵelementStart(55, \"div\", 23);\r\n        i0.ɵɵelementStart(56, \"button\", 24);\r\n        i0.ɵɵlistener(\"click\", function NewldpComponent_Template_button_click_56_listener() { return ctx.registrarListaDePrecios(); });\r\n        i0.ɵɵtext(57, \"Crear\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵtemplate(58, NewldpComponent_div_58_Template, 11, 0, \"div\", 25);\r\n        i0.ɵɵtemplate(59, NewldpComponent_div_59_Template, 8, 0, \"div\", 25);\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementStart(60, \"div\", 26);\r\n        i0.ɵɵelementStart(61, \"button\", 27);\r\n        i0.ɵɵtext(62, \"Volver\");\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n        i0.ɵɵelementEnd();\r\n    } if (rf & 2) {\r\n        const _r0 = i0.ɵɵreference(7);\r\n        const _r1 = i0.ɵɵreference(13);\r\n        const _r2 = i0.ɵɵreference(23);\r\n        i0.ɵɵadvance(12);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.ldpNombre);\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.fechaDeCreacion);\r\n        i0.ɵɵadvance(5);\r\n        i0.ɵɵproperty(\"ngModel\", ctx.ldpDescripcion);\r\n        i0.ɵɵadvance(6);\r\n        i0.ɵɵproperty(\"value\", ctx.referenciaCostosStock);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx.branchesByStore);\r\n        i0.ɵɵadvance(22);\r\n        i0.ɵɵproperty(\"ngForOf\", ctx._productsList);\r\n        i0.ɵɵadvance(3);\r\n        i0.ɵɵproperty(\"disabled\", !_r0.form.valid);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"ngIf\", _r1.touched && !_r1.valid);\r\n        i0.ɵɵadvance(1);\r\n        i0.ɵɵproperty(\"ngIf\", _r2.touched && !_r2.valid);\r\n        i0.ɵɵadvance(2);\r\n        i0.ɵɵproperty(\"routerLink\", i0.ɵɵpureFunction1(12, _c0, \"/tienda/\" + ctx.storeId + \"/ldp/\"))(\"routerLinkActive\", i0.ɵɵpureFunction0(14, _c1))(\"routerLinkActive\", i0.ɵɵpureFunction0(15, _c1));\r\n    } }, directives: [i7.ɵNgNoValidate, i7.NgControlStatusGroup, i7.NgForm, i7.DefaultValueAccessor, i7.RequiredValidator, i7.NgControlStatus, i7.NgModel, i8.MatFormField, i8.MatLabel, i9.MatInput, i10.MatSelect, i11.MatOption, i12.NgForOf, i12.NgIf, i5.RouterLink, i5.RouterLinkActive, i13.MatButton], pipes: [i12.CurrencyPipe, i12.DatePipe], encapsulation: 2 });\r\n"]},"metadata":{},"sourceType":"module"}